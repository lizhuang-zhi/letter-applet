import Dialog from"../../../miniprogram_npm/@vant/weapp/dialog/dialog";let requestData=require("../../../utils/request"),app=getApp();Page({data:{chooseType:"",textValue:"",letterId:""},getTextValue(e){e=e.detail.textvalue;this.setData({textValue:e}),console.log(this.data.textValue)},ToChooseTag(e){wx.showLoading({title:"内容审核中.."});let n=e.currentTarget.dataset.value,a=this.data.chooseType,o=this.data.letterId,l=this.data.senderOpenId;0==n.length?wx.showToast({title:"请输入内容",icon:"none",image:"../../images/input.png"}):"吐槽"==this.data.chooseType&&10<=n.length?requestData.textLegal(n).then(e=>{console.log(e.data);var t=e.data.data;1==t?(e=JSON.stringify(n),wx.navigateTo({url:"/packageReleaseModule/pages/lettertype/lettertype?subvalue="+encodeURIComponent(e)+"&type="+a+"&letterId="+o+"&senderOpenId="+l+"&baiduAiCheck="+t}),console.log("执行跳转 senderOpenId ---\x3e "+l),wx.hideLoading({})):2==t||3==t?(wx.hideLoading({}),Dialog.confirm({title:"内容审核结果",message:"您发布的内容不当！请修改后重试",confirmButtonText:"立即修改",cancelButtonText:"交由审核"}).then(()=>{}).catch(()=>{var e=JSON.stringify(n);wx.navigateTo({url:"/packageReleaseModule/pages/lettertype/lettertype?subvalue="+encodeURIComponent(e)+"&type="+a+"&letterId="+o+"&senderOpenId="+l}),console.log("执行跳转 senderOpenId ---\x3e "+l)})):4==t&&(wx.hideLoading({}),Dialog.alert({title:"网络错误",message:"小主，请稍后再试~",theme:"round-button"}).then(()=>{}))}):n.length<30?wx.showToast({title:"小主，多写几句吧~",icon:"none"}):(console.log(n),requestData.textLegal(n).then(e=>{console.log(e.data);var t=e.data.data;1==t?(e=JSON.stringify(n),wx.navigateTo({url:"/packageReleaseModule/pages/lettertype/lettertype?subvalue="+encodeURIComponent(e)+"&type="+a+"&letterId="+o+"&senderOpenId="+l+"&baiduAiCheck="+t}),console.log("执行跳转 senderOpenId ---\x3e "+l),wx.hideLoading({})):2==t||3==t?(wx.hideLoading({}),Dialog.confirm({title:"内容审核结果",message:"您发布的内容不当！请修改后重试",confirmButtonText:"立即修改",cancelButtonText:"交由审核"}).then(()=>{}).catch(()=>{var e=JSON.stringify(n);wx.navigateTo({url:"/packageReleaseModule/pages/lettertype/lettertype?subvalue="+encodeURIComponent(e)+"&type="+a+"&letterId="+o+"&senderOpenId="+l}),console.log("执行跳转 senderOpenId ---\x3e "+l)})):4==t&&(wx.hideLoading({}),Dialog.alert({title:"网络错误",message:"小主，请稍后再试~",theme:"round-button"}).then(()=>{}))}))},onLoad:function(e){this.setData({chooseType:e.type,letterId:e.letterId,senderOpenId:e.senderOpenId,recipientPenName:e.recipientPenName,senderPenName:e.senderPenName}),console.log(this.data.chooseType)},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}});