import*as echarts from"../../ec-canvas/echarts";let requestData=require("../../../utils/request"),pubTools=require("../../../utils/public"),app=getApp();Page({data:{ec:{lazyLoad:!0},nickName:"",avatarUrl:"",userRank:""},lookMore(){wx.navigateTo({url:"/packageMyInfo/pages/timeline/timeline"})},infoTap(t){t=t.currentTarget.dataset.index;wx.navigateTo({url:"/packageMyInfo/pages/historyinfo/historyinfo?activeTabIndex="+t})},init_echarts:function(){this.echartsComponnet.init((t,e,a)=>{const o=echarts.init(t,null,{width:e,height:a,devicePixelRatio:app.globalData.pixelRatio});return o.setOption(this.getOption()),o})},getOption:function(){return{legend:{top:"bottom"},tooltip:{trigger:"item"},color:["#EE6666","#73C0DE","#FAC858"],series:[{name:"发布数量",type:"pie",top:"-10%",radius:[35,105],center:["50%","50%"],roseType:"area",itemStyle:{borderRadius:0},data:this.data.releaseArr,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}},getChartData:function(t){requestData.packageMyInfoIndexInfo(t).then(t=>{console.log(t.data.data);var e=t.data.data,t=e.models;this.setData({releaseArr:t,nickName:e.nickname,avatarUrl:e.avatarUrl,userRank:pubTools.indexInfoRank(e.backLetter)}),this.init_echarts()})},onLoad:function(t){this.echartsComponnet=this.selectComponent("#chart_all")},onReady:function(){},onShow:function(){this.getChartData(app.globalData.openid)},onHide:function(){},onUnload:function(){console.log("我的页面  ---- > 监听页面卸载")},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}});