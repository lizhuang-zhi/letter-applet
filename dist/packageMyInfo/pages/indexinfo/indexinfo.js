import*as echarts from"../../ec-canvas/echarts";let requestData=require("../../../utils/request"),pubTools=require("../../../utils/public"),app=getApp();Page({data:{ec:{lazyLoad:!0},nickName:"",avatarUrl:"",userRank:"",showTipPop:!1,rankArr:[{rank:"解忧小白",bgColor:"#FFC10A",detail:"解忧次数<5"},{rank:"解忧能手",bgColor:"#FF9803",detail:"5<=解忧次数<15"},{rank:"解忧专家",bgColor:"#FE5722",detail:"15<=解忧次数<25"},{rank:"解忧大师",bgColor:"#795549",detail:"25<=解忧次数"}]},showRankDetail(){this.setData({showTipPop:!0})},onRankDetailClose(){this.setData({showTipPop:!1})},lookMore(){wx.navigateTo({url:"/packageMyInfo/pages/timeline/timeline"})},infoTap(a){a=a.currentTarget.dataset.index;wx.navigateTo({url:"/packageMyInfo/pages/historyinfo/historyinfo?activeTabIndex="+a})},init_echarts:function(){this.echartsComponnet.init((a,t,e)=>{const o=echarts.init(a,null,{width:t,height:e,devicePixelRatio:app.globalData.pixelRatio});return o.setOption(this.getOption()),o})},getOption:function(){return{legend:{top:"bottom"},tooltip:{trigger:"item"},color:["#EE6666","#73C0DE","#FAC858"],series:[{name:"发布数量",type:"pie",top:"-10%",radius:[35,105],center:["50%","50%"],roseType:"area",itemStyle:{borderRadius:0},data:this.data.releaseArr,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}},getChartData:function(a){requestData.packageMyInfoIndexInfo(a).then(a=>{console.log(a.data.data);var t=a.data.data,a=t.models;this.setData({releaseArr:a,nickName:t.nickname,avatarUrl:t.avatarUrl,userRank:pubTools.indexInfoRank(t.backLetter)}),this.init_echarts()})},onLoad:function(a){this.echartsComponnet=this.selectComponent("#chart_all")},onReady:function(){},onShow:function(){this.getChartData(app.globalData.openid)},onHide:function(){},onUnload:function(){console.log("我的页面  ---- > 监听页面卸载")},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}});