let requestData=require("../../../utils/request"),timeTools=require("../../../utils/timeTools"),app=getApp();Page({data:{replyList:[],pageNum:1,isLastPage:null},clickEvent(e){var t=e.currentTarget.dataset.letterid,a=e.currentTarget.dataset.senderopenid,n=e.currentTarget.dataset.recipientpenname,s=e.currentTarget.dataset.senderpenname,e=e.currentTarget.dataset.replyid;wx.navigateTo({url:"/packageMyInfo/pages/replyletter/replyletter?letterId="+t+"&senderOpenId="+a+"&recipientPenName="+n+"&senderPenName="+s+"&replyId="+e})},Start(e){requestData.historyLetter(e,1).then(e=>{console.log(e.data.data.list);e=e.data.data;let t=e.list;t.forEach(e=>{e.senderTime=timeTools.historyLetterShowTime(e.senderTime)}),this.setData({isLastPage:e.isLastPage,replyList:t})})},onReachBottomLoad(){this.data.isLastPage?wx.showToast({title:"没有更多历史信件",icon:"none"}):requestData.historyLetter(openId,++this.data.pageNum).then(e=>{console.log(e.data.data);e=e.data.data;this.setData({isLastPage:e.isLastPage,replyList:this.data.replyList.concat(e.list)})})},onLoad:function(e){this.Start(app.globalData.openid)},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){this.onReachBottomLoad()},onShareAppMessage:function(){}});