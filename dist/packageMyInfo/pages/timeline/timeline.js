let requestData=require("../../../utils/request"),timeTools=require("../../../utils/timeTools"),app=getApp();Page({data:{axis:[],isLastPage:null,pageNum:1},onReachBotToGetMoreInfo(a,t){wx.showLoading({title:"加载中.."}),requestData.userTimeLine(a,t).then(i=>new Promise((a,t)=>{console.log(i.data.data);let e=this.data.axis;var o=i.data.data,n=o.isLastPage,o=this.changeFormTools(o.list);this.setData({axis:e.concat(o),isLastPage:n}),a("success")})).then(a=>{wx.hideLoading({})})},Start(a){wx.showLoading({title:"加载中.."}),requestData.userTimeLine(a,this.data.pageNum).then(n=>new Promise((a,t)=>{console.log(n.data.data);var e=n.data.data,o=this.changeFormTools(e.list),e=e.isLastPage;this.setData({axis:o,isLastPage:e}),a("success")})).then(a=>{wx.hideLoading({})})},changeFormTools(a){return a.forEach(a=>{a.eventType=this.changeEngToChina(a.eventType),a.eventTime=a.eventTime.substring(0,16)}),a},changeEngToChina(a){return"diary"==a?"日记":"letter"==a?"解忧":"spit"==a?"吐槽":void 0},onLoad:function(a){this.Start(app.globalData.openid)},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){this.data.isLastPage?wx.showToast({title:"暂无更多发布",icon:"none"}):this.onReachBotToGetMoreInfo(app.globalData.openid,++this.data.pageNum)},onShareAppMessage:function(){}});