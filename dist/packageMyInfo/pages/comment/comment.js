let requestData=require("../../../utils/request"),timeTools=require("../../../utils/timeTools"),pageNum=1,app=getApp();Page({data:{openid:"",dataArr:[]},Start(t){wx.showLoading({title:"加载中.."}),requestData.mailboxMessageList(t,pageNum).then(o=>new Promise((t,a)=>{console.log(o.data.data);let e=o.data.data;e.forEach(t=>{t.date=timeTools.commentListShowTime(t.date)}),this.setData({dataArr:e}),t("success")})).then(t=>{"success"==t&&wx.hideLoading({})})},toComplainPage(t){let a=t.currentTarget.dataset.id;requestData.complainDetail(a).then(t=>{console.log(t.data.data),null==t.data.data?wx.showToast({title:"该吐槽已被删除~",icon:"none"}):wx.navigateTo({url:"/packageWriteLetter/pages/complaintletter/complaintletter?id="+a})})},onReachButtomTap(t,a){requestData.mailboxMessageList(t,a).then(o=>new Promise((t,a)=>{console.log(o.data.data);let e=o.data.data;if(null==e)wx.showToast({title:"没有更多评论了",icon:"none"});else{e.forEach(t=>{t.date=timeTools.commentListShowTime(t.date)});let t=this.data.dataArr;this.setData({dataArr:t.concat(e.reverse())})}t("success")}))},onLoad:function(t){this.Start(t.openid)},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){pageNum=1},onPullDownRefresh:function(){},onReachBottom:function(){var t=app.globalData.openid;this.onReachButtomTap(t,++pageNum)},onShareAppMessage:function(){}});