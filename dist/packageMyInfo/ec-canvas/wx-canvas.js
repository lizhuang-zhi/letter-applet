export default class WxCanvas{constructor(t,e,a,i){this.ctx=t,this.canvasId=e,this.chart=null,(this.isNew=a)?this.canvasNode=i:this._initStyle(t),this._initEvent()}getContext(t){if("2d"===t)return this.ctx}setChart(t){this.chart=t}attachEvent(){}detachEvent(){}_initCanvas(t,a){t.util.getContext=function(){return a},t.util.$override("measureText",function(t,e){return a.font=e||"12px sans-serif",a.measureText(t)})}_initStyle(a){["fillStyle","strokeStyle","globalAlpha","textAlign","textBaseAlign","shadow","lineWidth","lineCap","lineJoin","lineDash","miterLimit","fontSize"].forEach(e=>{Object.defineProperty(a,e,{set:t=>{("fillStyle"!==e&&"strokeStyle"!==e||"none"!==t&&null!==t)&&a["set"+e.charAt(0).toUpperCase()+e.slice(1)](t)}})}),a.createRadialGradient=()=>a.createCircularGradient(arguments)}_initEvent(){this.event={};[{wxName:"touchStart",ecName:"mousedown"},{wxName:"touchMove",ecName:"mousemove"},{wxName:"touchEnd",ecName:"mouseup"},{wxName:"touchEnd",ecName:"click"}].forEach(e=>{this.event[e.wxName]=t=>{t=t.touches[0];this.chart.getZr().handler.dispatch(e.ecName,{zrX:"tap"===e.wxName?t.clientX:t.x,zrY:"tap"===e.wxName?t.clientY:t.y})}})}set width(t){this.canvasNode&&(this.canvasNode.width=t)}set height(t){this.canvasNode&&(this.canvasNode.height=t)}get width(){return this.canvasNode?this.canvasNode.width:0}get height(){return this.canvasNode?this.canvasNode.height:0}}