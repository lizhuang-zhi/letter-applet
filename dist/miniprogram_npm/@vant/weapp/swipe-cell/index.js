"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var component_1=require("../common/component"),touch_1=require("../mixins/touch"),utils_1=require("../common/utils"),THRESHOLD=.3,ARRAY=[];component_1.VantComponent({props:{disabled:Boolean,leftWidth:{type:Number,value:0,observer:function(t){void 0===t&&(t=0),0<this.offset&&this.swipeMove(t)}},rightWidth:{type:Number,value:0,observer:function(t){void 0===t&&(t=0),this.offset<0&&this.swipeMove(-t)}},asyncClose:Boolean,name:{type:[Number,String],value:""}},mixins:[touch_1.touch],data:{catchMove:!1},created:function(){this.offset=0,ARRAY.push(this)},destroyed:function(){var i=this;ARRAY=ARRAY.filter(function(t){return t!==i})},methods:{open:function(t){var i=this.data,e=i.leftWidth,i=i.rightWidth;this.swipeMove("left"===t?e:-i),this.$emit("open",{position:t,name:this.data.name})},close:function(){this.swipeMove(0)},swipeMove:function(t){this.offset=utils_1.range(t=void 0===t?0:t,-this.data.rightWidth,this.data.leftWidth);var i="translate3d("+this.offset+"px, 0, 0)",t=this.dragging?"none":"transform .6s cubic-bezier(0.18, 0.89, 0.32, 1)";this.setData({wrapperStyle:"\n        -webkit-transform: "+i+";\n        -webkit-transition: "+t+";\n        transform: "+i+";\n        transition: "+t+";\n      "})},swipeLeaveTransition:function(){var t=this.data,i=t.leftWidth,e=t.rightWidth,t=this.offset;0<e&&e*THRESHOLD<-t?this.open("right"):0<i&&i*THRESHOLD<t?this.open("left"):this.swipeMove(0),this.setData({catchMove:!1})},startDrag:function(t){this.data.disabled||(this.startOffset=this.offset,this.touchStart(t))},noop:function(){},onDrag:function(t){var i=this;this.data.disabled||(this.touchMove(t),"horizontal"===this.direction&&(this.dragging=!0,ARRAY.filter(function(t){return t!==i}).forEach(function(t){return t.close()}),this.setData({catchMove:!0}),this.swipeMove(this.startOffset+this.deltaX)))},endDrag:function(){this.data.disabled||(this.dragging=!1,this.swipeLeaveTransition())},onClick:function(t){t=t.currentTarget.dataset.key,t=void 0===t?"outside":t;this.$emit("click",t),this.offset&&(this.data.asyncClose?this.$emit("close",{position:t,instance:this,name:this.data.name}):this.swipeMove(0))}}});