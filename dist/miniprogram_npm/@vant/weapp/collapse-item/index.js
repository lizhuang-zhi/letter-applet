"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var component_1=require("../common/component");component_1.VantComponent({classes:["title-class","content-class"],relation:{name:"collapse",type:"ancestor",current:"collapse-item"},props:{name:null,title:null,value:null,icon:String,label:String,disabled:Boolean,clickable:Boolean,border:{type:Boolean,value:!0},isLink:{type:Boolean,value:!0}},data:{expanded:!1},created:function(){this.animation=wx.createAnimation({duration:0,timingFunction:"ease-in-out"})},mounted:function(){this.updateExpanded(),this.inited=!0},methods:{updateExpanded:function(){if(!this.parent)return Promise.resolve();var t=this.parent.data,e=t.value,n=t.accordion,a=this.parent.children,t=this.data.name,a=(void 0===a?[]:a).indexOf(this),i=null==t?a:t,e=n?e===i:(e||[]).some(function(t){return t===i});e!==this.data.expanded&&this.updateStyle(e),this.setData({index:a,expanded:e})},updateStyle:function(n){var a=this,i=this.inited;this.getRect(".van-collapse-item__content").then(function(t){return t.height}).then(function(t){var e=a.animation;if(n)return e.height(t).top(1).step({duration:i?300:1}).height("auto").step(),void a.setData({animation:e.export()});e.height(t).top(0).step({duration:1}).height(0).step({duration:300}),a.setData({animation:e.export()})})},onClick:function(){var t,e,n;this.data.disabled||(t=(n=this.data).name,e=n.expanded,n=this.parent.children.indexOf(this),this.parent.switch(null==t?n:t,!e))}}});