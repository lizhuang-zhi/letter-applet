"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var component_1=require("../common/component"),utils_1=require("../common/utils"),ARRAY=[];component_1.VantComponent({field:!0,relation:{name:"dropdown-item",type:"descendant",current:"dropdown-menu",linked:function(){this.updateItemListData()},unlinked:function(){this.updateItemListData()}},props:{activeColor:{type:String,observer:"updateChildrenData"},overlay:{type:Boolean,value:!0,observer:"updateChildrenData"},zIndex:{type:Number,value:10},duration:{type:Number,value:200,observer:"updateChildrenData"},direction:{type:String,value:"down",observer:"updateChildrenData"},closeOnClickOverlay:{type:Boolean,value:!0,observer:"updateChildrenData"},closeOnClickOutside:{type:Boolean,value:!0}},data:{itemListData:[]},beforeCreate:function(){var t=wx.getSystemInfoSync().windowHeight;this.windowHeight=t,ARRAY.push(this)},destroyed:function(){var e=this;ARRAY=ARRAY.filter(function(t){return t!==e})},methods:{updateItemListData:function(){this.setData({itemListData:this.children.map(function(t){return t.data})})},updateChildrenData:function(){this.children.forEach(function(t){t.updateDataFromParent()})},toggleItem:function(i){this.children.forEach(function(t,e){var n=t.data.showPopup;e===i?t.toggle():n&&t.toggle(!1,{immediate:!0})})},close:function(){this.children.forEach(function(t){t.toggle(!1,{immediate:!0})})},getChildWrapperStyle:function(){var n=this,t=this.data,i=t.zIndex,o=t.direction;return this.getRect(".van-dropdown-menu").then(function(t){var e=t.top,t=t.bottom,t="down"===o?void 0===t?0:t:n.windowHeight-(void 0===e?0:e),e="z-index: "+i+";";return e+="down"===o?"top: "+utils_1.addUnit(t)+";":"bottom: "+utils_1.addUnit(t)+";"})},onTitleTap:function(t){var e=this,t=t.currentTarget.dataset.index;this.children[t].data.disabled||(ARRAY.forEach(function(t){t&&t.data.closeOnClickOutside&&t!==e&&t.close()}),this.toggleItem(t))}}});